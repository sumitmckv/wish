(this.webpackJsonpwish=this.webpackJsonpwish||[]).push([[0],{13:function(t,i,s){},14:function(t,i,s){},15:function(t,i,s){"use strict";s.r(i);var h=s(0),e=s.n(h),a=s(3),n=s.n(a),o=(s(13),s(1)),r=s(4),c=s(6),d=s(5),l=s(7);s(14);function u(t,i){return t+Math.random()*(i-t)}function g(t,i,s,h){return Math.sqrt((t-s)*(t-s)+(i-h)*(i-h))}var p=function t(i,s,h,e){for(Object(o.a)(this,t),this.x=void 0,this.y=void 0,this.sx=void 0,this.sy=void 0,this.tx=void 0,this.ty=void 0,this.ctx=void 0,this.distanceToTarget=void 0,this.distanceTraveled=void 0,this.coordinates=void 0,this.coordinateCount=void 0,this.angle=void 0,this.speed=void 0,this.acceleration=void 0,this.brightness=void 0,this.targetRadius=void 0,this.x=i,this.y=s,this.sx=i,this.sy=s,this.tx=h,this.ty=e,this.distanceToTarget=g(i,s,h,e),this.distanceTraveled=0,this.coordinates=[],this.coordinateCount=2;this.coordinateCount--;)this.coordinates.push([this.x,this.y]);this.angle=Math.atan2(e-s,h-i),this.speed=1,this.acceleration=1.2,this.brightness=u(50,70),this.targetRadius=1},v=function t(i,s,h,e){for(Object(o.a)(this,t),this.x=void 0,this.y=void 0,this.angle=0,this.speed=0,this.brightness=void 0,this.hue=0,this.type=void 0,this.friction=0,this.gravity=0,this.alpha=0,this.decay=0,this.coordinates=void 0,this.coordinateCount=void 0,this.x=i,this.y=s,this.type=h,this.coordinates=[],this.coordinateCount=6;this.coordinateCount--;)this.coordinates.push([this.x,this.y]);var a=u(1,5);switch(h){case 1:a<2?(this.angle=u(0,2*Math.PI),this.speed=u(1,15),this.friction=.95,this.gravity=4,this.hue=u(e-50,e+50),this.brightness=u(50,80),this.alpha=1,this.decay=u(.01,.02)):a<3?(this.angle=u(0,2*Math.PI),this.speed=u(1,5),this.friction=.95,this.gravity=3,this.hue=u(e-50,e),this.brightness=u(50,80),this.alpha=1,this.decay=u(.015,.03)):a<4?(this.angle=u(0,2*Math.PI),this.speed=u(1,8),this.friction=.95,this.gravity=3,this.hue=u(e,e+50),this.brightness=u(50,80),this.alpha=1,this.decay=u(.015,.03)):(this.angle=u(0,2*Math.PI),this.speed=u(1,15),this.friction=.95,this.gravity=3,this.hue=u(e-50,e+50),this.brightness=u(10,20),this.alpha=1,this.decay=u(.015,.3));break;case 2:a<2?(this.angle=u(0,2*Math.PI),this.speed=u(1,10),this.friction=.95,this.gravity=4,this.hue=100,this.brightness=u(50,80),this.alpha=1,this.decay=u(.01,.02)):a<3?(this.angle=u(0,2*Math.PI),this.speed=u(1,21),this.friction=.95,this.gravity=3,this.hue=100,this.brightness=u(50,80),this.alpha=1,this.decay=u(.015,.03)):a<4?(this.angle=u(0,2*Math.PI),this.speed=u(1,3),this.friction=.95,this.gravity=3,this.hue=100,this.brightness=u(50,80),this.alpha=1,this.decay=u(.015,.03)):(this.angle=u(0,2*Math.PI),this.speed=u(1,5),this.friction=.95,this.gravity=3,this.hue=100,this.brightness=u(10,20),this.alpha=1,this.decay=u(.015,.3));break;case 3:a<2?(this.angle=u(0,2*Math.PI),this.speed=u(10,15),this.friction=.95,this.gravity=4,this.hue=60,this.brightness=u(10,20),this.alpha=1,this.decay=u(.01,.02)):a<3?(this.angle=u(0,2*Math.PI),this.speed=u(11,15),this.friction=.95,this.gravity=3,this.hue=10,this.brightness=u(10,20),this.alpha=1,this.decay=u(.015,.03)):a<4?(this.angle=u(0,2*Math.PI),this.speed=u(11,18),this.friction=.95,this.gravity=3,this.hue=90,this.brightness=u(10,20),this.alpha=1,this.decay=u(.015,.03)):(this.angle=u(0,2*Math.PI),this.speed=u(11,15),this.friction=.95,this.gravity=3,this.hue=120,this.brightness=u(10,20),this.alpha=1,this.decay=u(.015,.3));break;case 4:a<2?(this.angle=u(0,2*Math.PI),this.speed=u(1,10),this.friction=.95,this.gravity=4,this.hue=300,this.brightness=u(50,80),this.alpha=1,this.decay=u(.01,.02)):a<3?(this.angle=u(0,2*Math.PI),this.speed=u(1,21),this.friction=.95,this.gravity=3,this.hue=300,this.brightness=u(50,80),this.alpha=1,this.decay=u(.015,.03)):a<4?(this.angle=u(0,2*Math.PI),this.speed=u(1,3),this.friction=.95,this.gravity=3,this.hue=300,this.brightness=u(50,80),this.alpha=1,this.decay=u(.015,.03)):(this.angle=u(0,2*Math.PI),this.speed=u(1,5),this.friction=.95,this.gravity=3,this.hue=100,this.brightness=u(10,20),this.alpha=1,this.decay=u(.015,.3))}},f=function(t){function i(t){var s;Object(o.a)(this,i),(s=Object(c.a)(this,Object(d.a)(i).call(this,t))).canvasRef=void 0,s.canvas=void 0,s.ctx=void 0,s.fireworks=[],s.particles=[],s.sound=void 0,s.hue=120,s.limiterTotal=20,s.limiterTick=0,s.timerTotal=0,s.randomTime=0,s.timerTick=0,s.mousedown=!1,s.cw=0,s.ch=0,s.mx=0,s.my=0,s.wish=void 0,s.name=void 0;var h=window.location.href,a=new URL(h),n=a.searchParams;return s.wish=n.get("message"),s.name=n.get("to"),s.sound=new Audio(a.origin+a.pathname+"/firework.mp3"),s.canvasRef=e.a.createRef(),s}return Object(l.a)(i,t),Object(r.a)(i,[{key:"componentDidMount",value:function(){var t=this;this.canvas=this.canvasRef.current,this.canvas&&(this.cw=this.canvas.width=window.innerWidth,this.ch=this.canvas.height=window.innerHeight,this.ctx=this.canvas.getContext("2d"),setInterval((function(){t.run()}),25))}},{key:"render",value:function(){var t=this;return e.a.createElement("div",{className:"App"},e.a.createElement("canvas",{ref:this.canvasRef,onMouseMove:function(i){return t.handleMouseMove(i)},onMouseDown:function(i){return t.handleMouseToggle(i,!0)},onMouseUp:function(i){return t.handleMouseToggle(i,!1)}}))}},{key:"handleMouseMove",value:function(t){this.canvas&&(this.mx=t.pageX-this.canvas.offsetLeft,this.my=t.pageY-this.canvas.offsetTop)}},{key:"handleMouseToggle",value:function(t,i){t.preventDefault(),this.mousedown=i}},{key:"updateFirework",value:function(t){var i=this.fireworks[0];i.targetRadius<8?i.targetRadius+=.3:i.targetRadius=1,i.speed*=i.acceleration;var s=Math.cos(i.angle)*i.speed,h=Math.sin(i.angle)*i.speed;i.distanceTraveled=g(i.sx,i.sy,i.x+s,i.y+h),i.distanceTraveled>=i.distanceToTarget?(i.coordinates.pop(),i.coordinates.unshift([i.tx,i.ty]),this.createParticles(i.x,i.y),this.sound.play(),this.drawFirework(t),this.fireworks.splice(t,1)):(i.x+=s,i.y+=h),i.coordinates.pop(),i.coordinates.unshift([i.x,i.y])}},{key:"drawWish",value:function(){this.ctx&&this.wish&&this.name&&(this.ctx.textBaseline="middle",this.ctx.textAlign="center",this.ctx.fillStyle="#fff",this.cw<=400?this.ctx.font="30px san-serif":this.cw<=600?this.ctx.font="40px san-serif":this.ctx.font="60px san-serif",this.ctx.strokeText(this.wish.toUpperCase(),this.cw/2,this.ch/2.5),this.ctx.fillText(this.name.toUpperCase(),this.cw/2,this.ch/2))}},{key:"drawFirework",value:function(t){if(this.ctx){var i=this.fireworks[t];this.drawWish(),this.ctx.beginPath(),this.ctx.moveTo(i.coordinates[i.coordinates.length-1][0],i.coordinates[i.coordinates.length-1][1]),this.ctx.lineTo(i.x,i.y),this.ctx.strokeStyle="hsl("+this.hue+", 100%, "+i.brightness+"%)",this.ctx.stroke()}}},{key:"updateParticle",value:function(t){var i=this.particles[t];i.speed*=i.friction,i.x+=Math.cos(i.angle)*i.speed,i.y+=Math.sin(i.angle)*i.speed+i.gravity,i.alpha-=i.decay,4===i.type&&i.alpha<=.5&&(i.brightness+=50,this.hue+=200,i.brightness>=200&&(i.brightness=0)),i.alpha<=i.decay&&this.particles.splice(t,1),i.coordinates.pop(),i.coordinates.unshift([i.x,i.y])}},{key:"drawParticle",value:function(t){if(this.ctx){var i=this.particles[t];this.drawWish(),this.ctx.beginPath(),this.ctx.moveTo(i.coordinates[i.coordinates.length-1][0],i.coordinates[i.coordinates.length-1][1]),this.ctx.lineTo(i.x,i.y),this.ctx.strokeStyle="hsla("+this.hue+", 100%, "+i.brightness+"%, "+i.alpha+")",this.ctx.stroke()}}},{key:"createParticles",value:function(t,i){for(var s=300,h=Math.floor(u(1,5));s--;)this.particles.push(new v(t,i,h,this.hue))}},{key:"run",value:function(){if(this.hue+=.5,this.ctx){this.ctx.globalCompositeOperation="destination-out",this.ctx.fillStyle="rgba(0, 0, 0, 0.3)",this.ctx.fillRect(0,0,this.cw,this.ch),this.ctx.globalCompositeOperation="lighter";for(var t=this.fireworks.length;t--;)this.drawFirework(t),this.updateFirework(t);for(t=this.particles.length;t--;)this.drawParticle(t),this.updateParticle(t);if(this.timerTick>=this.timerTotal+this.randomTime){if(!this.mousedown){var i=Math.pow(Math.floor(u(-Math.pow(this.cw/2,1/3),Math.pow(this.cw/2,1/3))),3);i+=this.cw/2,this.fireworks.push(new p(this.cw/2,this.ch,i,u(0,this.ch/2))),this.timerTick=0,this.randomTime=Math.pow(u(2,4),2)}}else this.timerTick++;this.limiterTick>=this.limiterTotal?this.mousedown?(this.fireworks.push(new p(this.cw/2,this.ch,this.mx,this.my)),this.limiterTick=0):this.limiterTick=this.limiterTotal:this.limiterTick++}}}]),i}(e.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n.a.render(e.a.createElement(f,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))},8:function(t,i,s){t.exports=s(15)}},[[8,1,2]]]);
//# sourceMappingURL=main.77ca9271.chunk.js.map